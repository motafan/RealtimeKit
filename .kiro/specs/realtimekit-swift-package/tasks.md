# RealtimeKit Swift Package 实现任务列表

## 实现计划

以下任务列表将指导 RealtimeKit Swift Package 的完整实现，采用测试驱动开发方法，确保每个步骤都有相应的测试覆盖，并按照从核心到外围的顺序进行实现。

**当前状态**: 项目已成功编译，核心架构和大部分功能已实现，但存在测试编译错误需要修复。

- [x] 1. 建立项目基础结构和核心协议
  - 创建 Swift Package 项目结构，包含所有必要的模块目录
  - 配置 Package.swift 支持 Swift Testing 框架（替代 XCTest）
  - 定义核心协议 RTCProvider 和 RTMProvider 接口
  - 实现基础数据模型和枚举类型
  - 创建项目配置文件 Package.swift 和模块依赖关系
  - 设置测试目标使用 Swift Testing 框架
  - _需求: 1.1, 1.2, 1.3, 12.1, 12.2, 测试要求 1_

- [x] 2. 实现核心数据模型和验证逻辑
  - [x] 2.1 创建用户角色和权限系统
    - 实现 UserRole 枚举及其权限验证逻辑
    - 实现 UserSession 数据模型及其初始化逻辑
    - 集成 @RealtimeStorage 支持，为 UserSession 添加自动持久化能力
    - 使用 Swift Testing 框架编写 UserRole 的单元测试，验证权限分配正确性
    - 使用 `@Test` 宏和 `#expect()` 断言编写测试
    - 测试 UserSession 的持久化和恢复功能
    - _需求: 4.1, 4.2, 4.4, 测试要求 1, 18.1, 18.2_

  - [x] 2.2 实现音频设置数据模型
    - 创建 AudioSettings 结构体，包含音量范围验证
    - 实现音频设置的编码解码功能，确保与 @RealtimeStorage 兼容
    - 集成 @RealtimeStorage 支持，为 AudioSettings 添加自动持久化能力
    - 使用 Swift Testing 编写音频设置验证和边界值测试
    - 使用 `@Test(arguments:)` 实现参数化的音量范围测试
    - 测试音频设置的自动持久化和恢复功能
    - _需求: 5.1, 5.2, 5.4, 测试要求 1, 18.1, 18.2_

  - [x] 2.3 实现音量检测配置模型
    - 创建 VolumeDetectionConfig 和 UserVolumeInfo 数据结构
    - 实现音量数据的平滑滤波算法
    - 集成 @RealtimeStorage 支持，为音量检测配置添加自动持久化能力
    - 使用 Swift Testing 编写音量检测配置的单元测试
    - 使用 `@Test` 宏测试平滑滤波算法的准确性
    - 测试音量检测配置的持久化功能
    - _需求: 6.1, 6.2, 6.6, 测试要求 1, 18.1, 18.2_

  - [x] 2.4 实现消息处理数据模型
    - 创建 RealtimeMessage 和相关枚举类型
    - 实现消息类型验证和序列化逻辑
    - 集成 @RealtimeStorage 支持，为消息处理配置添加自动持久化能力
    - 使用 Swift Testing 编写消息模型的单元测试
    - 使用 `#expect()` 断言验证消息序列化的正确性
    - 测试消息处理配置的持久化功能
    - _需求: 10.1, 10.2, 测试要求 1, 18.1, 18.2_

- [x] 3. 实现存储管理系统
  - [x] 3.1 实现自动状态持久化核心架构
    - 创建 StorageBackend 协议，定义统一的存储接口
    - 实现 UserDefaultsBackend 和 KeychainBackend 存储后端
    - 创建 MockStorageBackend 用于测试支持
    - 实现存储后端的异步操作和错误处理机制
    - 使用 Swift Testing 编写存储后端的单元测试
    - _需求: 18.4, 18.5, 18.9, 18.11_

  - [x] 3.2 实现持久化属性包装器
    - 创建 @RealtimeStorage 属性包装器，支持自动状态持久化
    - 实现 @SecureRealtimeStorage 属性包装器，用于敏感数据存储
    - 添加 SwiftUI DynamicProperty 支持和 Binding 投影
    - 实现自动状态恢复和变化监听机制
    - 编写属性包装器的单元测试和集成测试
    - _需求: 18.1, 18.2, 18.3, 18.10_

  - [x] 3.3 实现存储管理器和性能优化
    - 创建 StorageManager 中央管理器，支持命名空间管理
    - 实现批量写入和延迟写入机制优化性能
    - 添加存储性能监控和指标收集功能
    - 实现存储错误处理和降级机制
    - 编写存储管理器的性能测试和并发测试
    - _需求: 18.6, 18.8, 18.9_

  - [x] 3.4 实现数据迁移和版本化支持
    - 创建数据迁移框架，支持版本化存储
    - 实现迁移计划创建和执行机制
    - 添加迁移状态监控和错误恢复功能
    - 实现向后兼容性和数据完整性验证
    - 编写数据迁移的单元测试和集成测试
    - _需求: 18.7_

- [x] 4. 实现本地化支持系统
  - [x] 4.1 创建本地化管理器核心功能
    - 实现 LocalizationManager 单例类，支持多语言管理
    - 创建 SupportedLanguage 枚举，定义支持的语言类型
    - 实现自动语言检测和系统语言适配功能
    - 使用 @RealtimeStorage 自动持久化当前语言设置和用户偏好
    - 使用 Swift Testing 编写语言检测和切换的单元测试
    - _需求: 17.2, 17.3, 17.5, 18.1, 18.2_

  - [x] 4.2 实现本地化字符串管理
    - 创建内置本地化字符串资源（英文、中文简繁体、日文、韩文）
    - 实现本地化字符串获取和回退机制
    - 添加带参数的本地化字符串格式化功能
    - 使用 @RealtimeStorage 缓存和持久化自定义语言包
    - 实现开发者自定义语言包支持
    - 编写本地化字符串获取和格式化的单元测试
    - _需求: 17.1, 17.4, 17.7, 17.8, 18.1_

  - [x] 4.3 实现本地化错误处理系统
    - 创建 LocalizedRealtimeError 枚举，提供多语言错误消息
    - 实现错误消息的本地化和动态语言切换
    - 集成本地化管理器到错误处理流程
    - 使用 @RealtimeStorage 持久化错误消息显示偏好
    - 编写本地化错误消息的单元测试和语言切换测试
    - _需求: 17.1, 17.6, 18.1_

  - [x] 4.4 实现本地化 UI 组件支持
    - 创建 SwiftUI 本地化组件（LocalizedText、LocalizedButton）
    - 实现 UIKit 本地化扩展（UILabel、UIButton 扩展）
    - 添加语言变化通知和 UI 自动更新机制
    - 使用 @RealtimeStorage 持久化 UI 组件的本地化状态
    - 编写本地化 UI 组件的单元测试和集成测试
    - _需求: 17.3, 17.6, 18.1, 18.10_

- [x] 5. 实现错误处理和状态管理
  - [x] 5.1 创建统一错误处理系统
    - 实现 RealtimeError 枚举和本地化错误描述
    - 集成本地化支持到错误处理系统
    - 添加错误恢复机制和用户友好的错误提示
    - 编写错误处理的单元测试和边界情况测试
    - _需求: 13.1, 13.4, 17.1_

  - [x] 5.2 实现连接状态管理
    - 创建连接状态枚举和状态转换逻辑
    - 实现自动重连和网络异常处理机制
    - 集成本地化的连接状态提示信息
    - 编写连接状态管理的单元测试和网络模拟测试
    - _需求: 13.2, 13.3, 17.6_

- [x] 6. 实现音量指示器管理系统
  - [x] 6.1 创建音量指示器核心管理器
    - 实现 VolumeIndicatorManager 类，支持实时音量处理
    - 添加音量数据的平滑滤波和阈值检测算法
    - 实现说话状态变化检测和主讲人识别逻辑
    - _需求: 6.2, 6.3, 6.4_

  - [x] 6.2 实现音量事件处理系统
    - 创建音量事件回调机制，支持多种事件类型
    - 实现异步事件处理和线程安全保护
    - 编写音量事件处理的单元测试和并发测试
    - _需求: 6.3, 6.5_

- [x] 7. 实现 Token 管理系统
  - [x] 7.1 创建 Token 管理器核心功能
    - 实现 TokenManager 类，支持多服务商 Token 管理
    - 添加 Token 过期检测和自动续期机制
    - 实现指数退避的重试逻辑和错误处理
    - _需求: 9.1, 9.2, 9.3, 9.4_

  - [x] 7.2 实现 Token 续期调度系统
    - 创建基于 Timer 的 Token 续期调度机制
    - 实现多服务商的独立 Token 生命周期管理
    - 编写 Token 管理的单元测试和集成测试
    - _需求: 9.5_

- [x] 8. 实现转推流管理系统
  - [x] 8.1 创建转推流配置和验证
    - 实现 StreamPushConfig 和 StreamLayout 数据模型
    - 添加转推流配置的验证逻辑和错误处理
    - 编写转推流配置验证的单元测试
    - _需求: 7.1, 7.5_

  - [x] 8.2 实现转推流控制逻辑
    - 创建 StreamPushManager 类，管理转推流生命周期
    - 实现转推流启动、停止和布局更新功能
    - 实现转推流状态管理和错误恢复机制
    - 编写转推流控制的单元测试和状态转换测试
    - _需求: 7.2, 7.3, 7.4_

- [x] 9. 实现跨媒体流中继系统
  - [x] 9.1 创建媒体中继配置管理
    - 实现 MediaRelayConfig 和相关数据模型
    - 添加中继配置的验证和频道管理逻辑
    - 编写媒体中继配置的单元测试
    - _需求: 8.1, 8.4_

  - [x] 9.2 实现媒体中继控制功能
    - 创建 MediaRelayManager 类，管理媒体中继生命周期
    - 实现媒体中继的启动、停止和频道管理功能
    - 实现中继状态监控和统计信息收集
    - 编写媒体中继控制的单元测试和状态管理测试
    - _需求: 8.2, 8.3, 8.5, 8.6_

- [x] 10. 实现消息处理管道系统
  - [x] 10.1 实现消息处理器管理器
    - 创建 MessageProcessorManager 实现类
    - 实现消息处理器的注册、注销和优先级管理
    - 添加消息处理链的执行和错误处理逻辑
    - 编写消息处理器管理的单元测试
    - _需求: 10.1, 10.2, 10.3_

  - [x] 10.2 实现具体消息处理器
    - 创建文本消息处理器和系统消息处理器
    - 实现自定义消息处理器和过滤器
    - 添加消息转换和验证处理器
    - 编写各种消息处理器的单元测试和集成测试
    - _需求: 10.4, 10.5_

- [x] 11. 实现核心 RealtimeManager
  - [x] 11.1 完善 RealtimeManager 基础架构
    - 实现完整的服务商配置和切换功能
    - 集成所有子管理器（Token、音量、媒体中继、本地化等）
    - 添加服务商工厂模式和依赖注入机制
    - 集成本地化管理器到核心管理器
    - _需求: 3.1, 3.2, 2.3, 17.2_

  - [x] 11.2 集成自动状态持久化机制
    - 将 RealtimeManager 的关键状态属性迁移到 @RealtimeStorage 属性包装器
    - 实现音频设置、用户会话、连接历史等状态的自动持久化
    - 添加敏感数据（如认证令牌）的 @SecureRealtimeStorage 支持
    - 实现应用启动时的自动状态恢复机制
    - 编写持久化集成的单元测试和恢复测试
    - _需求: 18.1, 18.2, 18.3, 18.10_

  - [x] 11.3 实现用户身份和会话管理
    - 创建用户登录、登出和角色切换功能
    - 实现会话状态管理和权限验证
    - 使用 @RealtimeStorage 自动持久化用户会话
    - 添加本地化的用户提示和角色显示
    - 编写用户身份管理的单元测试和权限测试
    - _需求: 4.1, 4.2, 4.3, 4.5, 17.6, 18.2_

  - [x] 11.4 实现音频控制和设置管理
    - 创建音频控制 API 和设置持久化功能
    - 使用 @RealtimeStorage 自动持久化音频设置
    - 实现音频设置的自动恢复和同步机制
    - 添加本地化的音频状态提示
    - 编写音频控制的单元测试和持久化测试
    - _需求: 5.1, 5.2, 5.3, 5.5, 5.6, 17.6, 18.2_

  - [x] 11.5 集成 SwiftUI 响应式支持
    - 完善 @Published 属性和状态管理
    - 添加 Combine 支持和异步数据流
    - 实现状态变化的自动 UI 更新机制
    - 集成本地化支持到响应式数据绑定
    - 确保 @RealtimeStorage 与 SwiftUI 数据绑定的兼容性
    - 编写 SwiftUI 集成的单元测试和响应式测试
    - _需求: 3.3, 11.3, 17.3, 18.10_

- [x] 12. 实现服务商适配器
  - [x] 12.1 完善 Agora 服务商实现
    - 实现完整的 AgoraRTCProvider 和 AgoraRTMProvider 功能
    - 添加 Agora SDK 的音量检测和转推流功能
    - 实现 Agora 特有的功能和优化
    - 集成本地化错误消息到 Agora 适配器
    - 编写 Agora 适配器的单元测试和集成测试
    - _需求: 2.1, 1.1, 1.2, 17.1_

  - [x] 12.2 创建 Mock 服务商实现
    - 实现 MockRTCProvider 和 MockRTMProvider 用于测试
    - 添加可配置的模拟行为和错误注入功能
    - 实现本地化错误消息的模拟测试
    - 编写 Mock 服务商的测试工具和验证逻辑
    - _需求: 12.4, 16.3, 17.1_

  - [x] 12.3 实现服务商工厂和切换机制
    - 创建 ProviderFactory 协议和具体实现
    - 实现服务商动态切换和状态保持功能
    - 添加服务商降级和故障转移机制
    - 集成本地化的服务商切换提示
    - 编写服务商切换的集成测试
    - _需求: 2.2, 2.3, 2.4, 17.6_

- [x] 13. 完善 UIKit 集成层
  - [x] 13.1 扩展 UIKit 基础组件
    - 完善 RealtimeViewController 功能实现
    - 添加音量可视化和说话指示器 UIView 组件
    - 实现完整的 Delegate 模式和事件处理
    - 集成本地化 UIKit 扩展组件
    - 集成 @RealtimeStorage 到 UIKit 控制器中，实现 UI 状态自动持久化
    - 编写 UIKit 组件的 UI 测试和交互测试
    - _需求: 11.1, 11.4, 17.3, 17.6, 18.10_

  - [x] 13.2 实现 UIKit 高级功能
    - 创建音频控制面板和设置界面组件
    - 实现转推流和媒体中继的 UI 控制组件
    - 添加错误处理和用户反馈 UI 组件
    - 集成本地化的用户界面文本和提示
    - 使用 @RealtimeStorage 持久化用户界面设置和偏好
    - 编写 UIKit 高级功能的集成测试
    - _需求: 11.4, 7.2, 8.2, 17.6, 18.10_

- [x] 14. 完善 SwiftUI 集成层
  - [x] 14.1 扩展 SwiftUI 基础组件
    - 完善 RealtimeView 和声明式 UI 组件
    - 添加音量波形可视化和动画效果
    - 实现响应式数据绑定和状态管理
    - 集成本地化 SwiftUI 组件（LocalizedText、LocalizedButton）
    - 创建使用 @RealtimeStorage 的 SwiftUI 示例组件
    - 编写 SwiftUI 组件的 UI 测试和动画测试
    - _需求: 11.2, 11.3, 17.3, 17.6, 18.10_

  - [x] 14.2 实现 SwiftUI 高级功能
    - 创建完整的 ViewModel 层支持 MVVM 架构
    - 实现 Combine 数据流和异步状态管理
    - 添加 iPad 自适应布局和多窗口支持
    - 集成本地化支持到 ViewModel 层
    - 在 ViewModel 中使用 @RealtimeStorage 实现状态持久化
    - 编写 ViewModel 的单元测试和数据流测试
    - _需求: 11.3, 11.5, 17.3, 18.10_

- [x] 15. 修复测试编译错误
  - [x] 15.1 修复 Swift Testing 兼容性问题
    - 修复 @Test 宏在 @available 标记函数上的使用问题
    - 更新测试函数的可用性标记，确保与 Swift Testing 兼容
    - 修复 RealtimeError 构造函数调用中缺少参数标签的问题
    - 修复 UserVolumeInfo 构造函数参数类型不匹配的问题
    - _需求: 测试要求 1, 16.1_

  - [x] 15.2 修复数据模型测试错误
    - 修复 UserVolumeInfo 模型的 volume 参数类型（Int vs Float）
    - 移除 UserVolumeInfo 构造函数中不存在的 isSpeaking 参数
    - 修复 RealtimeError 中不存在的错误类型引用
    - 更新测试代码以匹配实际的数据模型接口
    - _需求: 6.1, 6.2, 13.1_

  - [x] 15.3 完善测试覆盖和验证
    - 运行 `swift test` 确保所有测试通过
    - 验证测试覆盖率达到要求标准
    - 修复所有编译警告和错误
    - 确保测试代码质量和可维护性
    - _需求: 16.1, 16.2, 测试要求 1_

- [x] 16. 实现性能优化
  - [x] 16.1 优化内存管理
    - 实现对象池管理频繁创建的对象
    - 添加弱引用和资源清理机制
    - 优化本地化字符串缓存和内存使用
    - 编写内存泄漏检测和性能基准测试
    - _需求: 14.1, 14.4_

  - [x] 16.2 优化网络和线程性能
    - 实现连接池和数据压缩优化
    - 添加线程安全保护和异步处理优化
    - 优化本地化管理器的性能和响应速度
    - 编写网络性能测试和并发安全测试
    - _需求: 14.2, 14.3_

- [ ] 17. 创建 Demo 应用
  - [ ] 17.1 实现 UIKit Demo 应用
    - 创建完整的 UIKit Demo 应用展示所有功能
    - 实现登录、房间管理、音视频通话等核心场景
    - 添加转推流、媒体中继和音量可视化演示
    - 集成多语言支持和语言切换功能
    - 展示 @RealtimeStorage 在 UIKit 中的使用，包括用户偏好和应用状态持久化
    - 演示应用重启后的状态自动恢复功能
    - _需求: 11.1, 7.2, 8.2, 6.5, 17.3, 18.10_

  - [ ] 17.2 实现 SwiftUI Demo 应用
    - 创建现代化的 SwiftUI Demo 应用
    - 实现声明式 UI 和响应式数据绑定演示
    - 添加动画效果和 iPad 自适应布局
    - 展示本地化 SwiftUI 组件的使用
    - 创建使用 @RealtimeStorage 的 SwiftUI 视图示例
    - 演示持久化属性包装器与 SwiftUI 数据绑定的集成
    - _需求: 11.2, 11.3, 17.3, 18.10_

- [ ] 18. 完成文档和发布准备
  - [ ] 18.1 编写 API 文档和使用指南
    - 创建完整的 API 参考文档和代码示例
    - 编写快速开始指南和最佳实践文档
    - 添加本地化支持的使用指南和配置说明
    - 添加故障排除指南和常见问题解答
    - _需求: 所有需求的文档化, 17.7_

  - [ ] 18.2 准备 Swift Package 发布
    - 配置 Package.swift 的版本和依赖信息
    - 创建发布说明和版本兼容性文档
    - 验证 Swift Package Manager 的正确集成
    - 准备多语言的发布文档和说明
    - _需求: 12.3, 12.5, 17.4_

## 任务执行说明

### 优化后的任务开发顺序

基于依赖关系分析和开发效率考虑，推荐以下执行顺序：

#### 🏗️ **第一阶段：基础架构层**（必须按顺序执行）
1. **任务 1** - 建立项目基础结构和核心协议 ✅
2. **任务 3.3** - 实现自动状态持久化核心架构（StorageBackend 协议和后端实现）
3. **任务 3.4** - 实现持久化属性包装器（@RealtimeStorage 和 @SecureRealtimeStorage）

#### 🧱 **第二阶段：核心数据层**（可并行执行，都依赖第一阶段）
4. **任务 2** - 实现核心数据模型和验证逻辑（集成持久化）
5. **任务 4** - 实现本地化支持系统（使用持久化机制）
6. **任务 3.5** - 实现存储管理器和性能优化
7. **任务 3.6** - 实现数据迁移和版本化支持

#### 🔧 **第三阶段：管理器层**（可并行执行，依赖第二阶段）
8. **任务 9** - 实现跨媒体流中继系统
9. **任务 10** - 实现消息处理管道系统
10. **任务 3.1** - 迁移音频设置到自动持久化机制（重构现有实现）
11. **任务 3.2** - 迁移用户会话到自动持久化机制（重构现有实现）

#### 🎯 **第四阶段：核心集成层**（按顺序执行）
12. **任务 11.1** - 完善 RealtimeManager 基础架构
13. **任务 11.2** - 集成自动状态持久化机制到 RealtimeManager
14. **任务 11.3** - 实现用户身份和会话管理
15. **任务 11.4** - 实现音频控制和设置管理
16. **任务 11.5** - 集成 SwiftUI 响应式支持

#### 🔌 **第五阶段：服务商适配层**（可并行执行）
17. **任务 12.2** - 创建 Mock 服务商实现（优先，用于测试）
18. **任务 12.1** - 完善 Agora 服务商实现
19. **任务 12.3** - 实现服务商工厂和切换机制

#### 🎨 **第六阶段：UI 集成层**（可并行执行）
20. **任务 13** - 完善 UIKit 集成层
21. **任务 14** - 完善 SwiftUI 集成层

#### ⚡ **第七阶段：优化和演示**（可并行执行）
22. **任务 15** - 实现性能优化
23. **任务 16** - 创建 Demo 应用

#### 🧪 **第八阶段：测试和发布**（按顺序执行）
24. **任务 17** - 完善测试覆盖
25. **任务 18** - 完成文档和发布准备

### 关键依赖关系说明

**核心依赖**：
- 🔑 **任务 3.3, 3.4** → 所有使用持久化的任务（2, 4, 11.2, 13, 14）
- 🔑 **任务 2** → 任务 11（RealtimeManager 需要数据模型）
- 🔑 **任务 4** → 任务 11（RealtimeManager 需要本地化支持）
- 🔑 **任务 11** → 任务 12, 13, 14（服务商和 UI 层需要核心管理器）

**优化理由**：
1. **提前实现 Mock 服务商**：便于早期测试和开发
2. **并行开发数据层**：任务 2 和 4 可以同时进行
3. **延后重构任务**：3.1 和 3.2 放在管理器层，避免重复工作
4. **UI 层并行**：UIKit 和 SwiftUI 可以同时开发

### 执行原则

1. **测试驱动开发**: 每个任务都应该先编写测试，再实现功能
2. **增量实现**: 按照任务顺序逐步实现，确保每个阶段都有可工作的代码
3. **编译验证**: **每完成一个任务都必须进行编译运行，确保代码编写没有问题**
   - 使用 `swift build` 命令验证项目编译通过
   - 使用 `swift test` 命令运行相关测试用例
   - 修复所有编译错误和警告
   - 确保新增代码不破坏现有功能
4. **代码审查**: 每个主要任务完成后都需要进行代码审查和质量检查
5. **文档同步**: 实现功能的同时更新相应的文档和注释
6. **性能监控**: 在关键功能实现后进行性能测试和优化

## 验证标准

每个任务完成后需要满足以下标准：
- ✅ **编译验证通过**: 使用 `swift build` 编译成功，无错误和警告
- ✅ **Swift Testing 验证通过**: 使用 `swift test` 运行 Swift Testing 框架测试，所有相关测试用例通过
- ✅ **测试框架要求**: 使用 `@Test` 宏、`#expect()` 断言、参数化测试等 Swift Testing 特性
- ✅ **本地化验证**: 本地化相关功能需要验证多语言支持和语言切换功能
- ✅ 功能实现完整且符合需求
- ✅ 单元测试覆盖率达到要求（80% 以上）
- ✅ 代码质量符合项目标准
- ✅ 文档和注释完整
- ✅ 性能指标达到预期

### 本地化验证要求

对于涉及本地化支持的任务，还需要额外验证：
- ✅ **语言检测**: 自动检测系统语言功能正常
- ✅ **语言切换**: 动态语言切换功能正常，UI 实时更新
- ✅ **多语言支持**: 支持的所有语言（中文简繁体、英文、日文、韩文）都有完整的本地化资源
- ✅ **回退机制**: 缺少特定语言时能正确回退到英文
- ✅ **参数化消息**: 带参数的本地化字符串格式化功能正常
- ✅ **错误消息本地化**: 所有错误消息都提供多语言支持
- ✅ **UI 组件本地化**: UIKit 和 SwiftUI 本地化组件功能正常

## 编译和测试命令

在项目根目录执行以下命令进行验证：

```bash
# 编译整个项目
swift build

# 运行所有测试
swift test

# 运行特定模块的测试
swift test --filter RealtimeCoreTests
swift test --filter RealtimeMockingTests

# 编译特定目标
swift build --target RealtimeCore
swift build --target RealtimeAgora
swift build --target RealtimeKit
```